<!-- macro library for navigation -->
<!-- $Id$ -->

<!-- ============================================================ -->
<!-- this require a batch_info from BaseNavigation.getTree -->
<metal:block define-macro="batch_info"
  tal:condition="python:batch_info and batch_info['nb_pages'] > 1">
<div align="right" class="even">
  <span i18n:translate="">
    Objects: <tal:block replace="batch_info/start"
    i18n:name="batch_start" /> - <tal:block replace="batch_info/stop"
    i18n:name="batch_limit" /> of <tal:block replace="batch_info/length"
    i18n:name="batch_length" />
  </span>
</div>
</metal:block>


<!-- ============================================================ -->
<!-- this require a batch_info from BaseNavigation.getTree -->
<metal:block define-macro="batch_nav"
  tal:condition="python:batch_info and batch_info['nb_pages'] > 1">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr class="even">
    <td align="center" width="100%">
      <span i18:translate="label_page">Pages</span>:
      <a tal:define="previous batch_info/previous"
        tal:condition="python:previous is not None"
        tal:attributes="href python:'%s?%s'%(request['URL'],
          mq(request.form, b_start=previous))"
        i18n:translate="batch_previous">Previous</a>
      <a tal:repeat="page batch_info/pages"
        tal:attributes="href python:'%s?%s'%(request['URL'],
          mq(request.form, b_start=page))"
        tal:omit-tag="python:page == batch_info['start'] - 1"
        tal:content="repeat/page/number">1</a>
      <a tal:define="next batch_info/next"
        tal:condition="python:next is not None"
        tal:attributes="href python:'%s?%s'%(request['URL'],
          mq(request.form, b_start=next))"
        i18n:translate="batch_next">Next</a>
    </td>
  </tr>
</table>
</metal:block>

